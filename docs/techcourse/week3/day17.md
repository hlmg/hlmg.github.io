# 17일 차 회고

---

## 프리코스 17일 차 11/04

오늘은 로또 미션을 구현했다. 시간을 정해서 구현을 했는데 5시간 동안 60프로 정도 만든 것 같다. 남은 기능은 몇개 없긴한데, 등수 개산이랑 수익률 계산 같은 생각할 내용이 있는 기능이어서 꽤나 시간이 걸릴 듯
하다.

프리코스 시작하기 전에 우테코 5기 분들이 만드신 Baton 이라는 프로젝트에서 이벤트를 했는데 거기에 참여를했었다. 실제 프리코스 미션처럼 자바 보스 몬스터라고 하는 미션을 풀고 PR을 보내면 5기 분들이 리뷰를
해주시는
이벤트였다. 문제를 풀고 리뷰 요청을 했었는데, 얼마전까지만해도 코멘트가 달리지 않았다. 5기 분들이 많이 바쁘셔서 지난 프로젝트에 신경 쓸 겨를이 없으신 것 같아 포기하고 있었는데 감사하게도 3주차 미션이 시작되는
날 리뷰를 달아주셨다.

리뷰내용에 원시값 포장, VO라는 키워드가 있었는데 해당 개념을 적용해보라고 말씀해주셨다. 나는 원시값 포장과, VO를 들어보긴 했는데, 정확히 어떤건지 그리고 어떻게 만들어야 되는지 제대로 알고있지
못했다. 그래서 해당 내용을 공부하고 이번 미션에 적용하기로 했다.

### 원시값 포장, VO

원시값 포장은 원시값을 객체로 만드는 것이다. e.g. String을 Name이라는 클래스로 포장

이렇게 원시값을 포장하면 객체와 동일하기 때문에 내부에 검증 로직을 가질 수 있다. 검증이 완료된 값이기 때문에 프로젝트 전반에서 신뢰하고 사용할 수 있다.

원시값 포장은 유효성 검사, 동등성 검사, 불변을 선택적으로 적용한다. 원시값을 포장하고 유효성, 동등성, 불변을 모두 구현하면 VO가 된다.

VO는 불변 클래스기 때문에 Thread-Safe하고 Side Effect가 적다.

## 학습 테스트

나는 로또 번호를 담는 로또 클래스를 이렇게 구현했다.

```java
public class Lotto {
    public static final int LOTTO_SIZE = 6;

    private final List<LottoNumber> numbers;

    public Lotto(List<Integer> numbers) {
        validate(numbers);
        this.numbers = toLottoNumbers(numbers);
    }
    ...
}
```

여기서 LottoNumber는 VO고 Lotto클래스도 VO로 만들고 싶었다. 그러기 위해선 numbers 필드에 저장되는 List도 불변이어야 한다.

기존에는 Collections.unmodifiableList()를 사용해서 numbers를 초기화했다. 그런데 Collections.unmodifiableList는 리스트의 참조를 내부에 가지고 있어서 원본 리스트의
변경에 영향을 받았다. 즉, 불변 클래스가 아니게 된다.

이번 미션에서 학습 테스트를 작성하면서 라이브러리를 공부하는 방법을 알려주셨는데, 그 방법을 사용해서 Collections.unmodifiableList()와 List.copyOf()의 학습 테스트를 만들었다.

## 마치며

record로 불변 클래스를 만드는 방법도 있는데, 일단 학습 차원에서 직접 유효성, 동등성, toString을 적용해보고 이후 리팩토링을 해서 record가 필요한 클래스는 적용을 할 예정이다.