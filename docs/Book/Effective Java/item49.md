# Item49. 매개변수가 유효한지 검사하라

메서드와 생성자는 입력 매개변수의 값이 특정 조건이 만족하기를 바란다. 이런 제약은 반드시 문서화해야 하며 메서드 몸체가 시작되기 전에 검사해야 한다.

메서드 몸체가 실행되기 전에 매개변수를 확인한다면 잘못된 값이 넘어왔을 때 즉각적이고 깔끔한 방식으로 예외를 던질 수 있다.

## requiredNonNull
자바 7에 추가된 Objects.requiredNonNull 메서드는 null 값이 오면 예외를 던지고, 아니면 입력을 그대로 반환한다.
```java
String a = Objects.requireNonNull(str, "Error message");
```
반환 값은 무시하고 필요한 곳 어디서든 null 검사 목적으로 사용해도 된다.

## assert
공개되지 않은 메서드라면, 메서드가 호출되는 상황을 통제할 수 있고 오직 유효한 값만이 메서드에 넘겨지는 걸 보증할 수 있다. 이런 메서드는 단언문을 사용해 매개변수 유효성을 검사할 수 있다.
```java
private static void sort(long a[], int offset, int length) {
    assert a != null;
    assert offset >= 0 && offset <= a.length;
    assert length >= 0 && length <= a.length - offset;
}
```
단언문은 실패하면 AssertionError를 던진다. 런타임에 아무 동작을 하지않고 성능 저하도 없다. JVM 실행 시 옵션 -ea을 설정해야 동작한다.

---

생성자 매개변수 유효성 검사는 불변식을 어기는 객체가 만들어지지 않음을 보장하기 때문에 꼭 필요하다.

메서드는 최대한 범용적으로 설계해야 한다. 메서드가 건내받은 값으로 무언가 제대로 된 일을 할 수 있다면 매개변수 제약은 적을수록 좋다.

:::info 정리
메서드나 생성자를 작성할 때 어떤 매개변수가 있고, 어떤 제약이 있을지 생각해야 한다.

그 제약을 문서화하고 메서드 코드 시작 부분에서 명시적으로 검사해야 한다.
:::
